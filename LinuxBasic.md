# Linux

: 유닉스를 PC 버전으로 개발한 운영체제



> 특징

- 멀티유저
- 멀티 태스크
- 필터와 파이프
  - 필터: 주어진 입력을 어떠한 형식으로 변환해서 출력
  - 파이프: 2개의 출력과 입력을 연결하는 구조
- 사용료 무료 ( 오픈소스 )



> 구조

`HardWare(CPU, Memory, Devices)`<=>`Kerner`<=>`Application`

- 커널은 항상 메모리에 상주하여 CPU, 메인 메모리, 하드 디스크 등의 하드웨어 자원을 제어하면서 프로세스 스케줄링, 기억장치 관리, 파일관리, 시스템 호출 인터페이스, 입출력 서비스 등의 기능을 사용자에게 제공

- shell이란 명령해석기가 사용자의 입력을 받아 시스템기능을 수행

  (커널과 사용자사이의 중계자 역할을 함)



> 명령어

##### Shell

1. 로그인 쉘 확인 : /ext/shells => 모든 사용가능한 쉘 출력

   ​						 echo$SHELL => 현재 사용중인 쉘 출력

2. 쉘 변경: chsh [option]

| 옵션 | 설명                                                         |
| ---- | ------------------------------------------------------------ |
| -s   | 지정하는 쉘을 앞으로 사용할 로그인 쉘로 변경. ex) chsh -s /bin/bash |
| -l   | /etc/shells 파일 안에 지정된 쉘을 나열                       |

3. usermod [-option] 계정명 : 계정자의 정보 변경

##### 프로세스 관리

1. Signal: 프로세스에 이벤트 발생을 전달해 주는 소프트웨어 인터럽트. `Kill -l`로 시그널 리스트 확인

2. ps [-option]: 현재 실행중인 프로세스 상태.

   | 옵션 | 설명                                                     |
   | ---- | -------------------------------------------------------- |
   | a    | 현재 실행중인 모든 프로세스 출력                         |
   | e    | 모든 프로세스 정보 출력                                  |
   | u    | 사용자 이름과 프로세스 시작 시간 출력                    |
   | x    | 접속된 터미널 뿐 아니라 사요되고 있는 모든 프로세스 출력 |
   | l    | 자세한 정보 출력                                         |

3. pstree: 실행중인 프로세스들을 트리 구조로 나타냄

   | 옵션 | 설명                                                   |
   | ---- | ------------------------------------------------------ |
   | -p   | 프로세스 ID표시                                        |
   | -n   | 프로세스 ID 정렬해서 표시                              |
   | -a   | 명령행 인자를 포함한 정보를 트리 구조에 표시           |
   | -h   | 현재 프로세스와 부모 프로세스를 음영으로 강조하여 표시 |

4. jobs: 작업이 중지된 상태, 백그라운드로 진행상태 표시.

   (출력결과 중 `-`는 대기 상태 작업을 나타냄)

5. kill [-option]: ps종료.

   | 옵션 | 설명                         |
   | ---- | ---------------------------- |
   | l    | 시그널 종류 나열             |
   | 1    | -HUP과 동일, 프로세스 재시작 |
   | 9    | 프로세스 강제 종료           |

6. killall: 같은 데몬의 여러 프로세서를 한번에 종료

7. nice: 프로세스 우선순위 확인, 변경 => -20(가장 높은 우선순위) ~ 19(가장 낮은 우선순위)가 있으면 default값은 10 (NI 범위라함.)

8. renice

   - 이미 실행중인 프로세스의 우선순위를 변경
   - 기존 NI값에 상관없이 NI 값을 설정

9. top: 리눅스 시스템의 운영 상태를 실시간으로 모니터링, 프로세스 상태 확인

   Ex) top -d -p 4056 => 프로세스 4056의 상태와 시스템 상태정보를 1초 간격으로 화면에 출력

   | 옵션 | 설명                                     |
   | ---- | ---------------------------------------- |
   | K    | kill과 동일                              |
   | n    | 표시되는 프로세스 갯수 지정              |
   | i    | 좀비 프로세스나 idle 프로세스의 정보출력 |
   | r    | NI값을 조절할 때 사용                    |
   | s    | 화면 갱신시간 변경                       |
   | q    | top종료                                  |

   - 실행상태에서 t키를 입력하면 명령어라인 항목을 on/off 할 수 있음

10. tail: 마지막 행을 기준으로 지정한 행까지 파일 내용의 일부 출력

    - -n [숫자] : 숫자만큼 라인 출력

    - <ctrl + d> : 진행중인 작업 정상종료 또는 shell 상태면 로그아웃
    - <ctrl + c> : 진행중인 작업 취소
    - <ctrl + z> : 프로세스를 대기

11. nohup

    - 프로세스가 중단되지 않고 백그라운드로 작업을 수행할 수 있게 함
    - 실행중인 프로세스의 터미널이 닫히더라도 계속적으로 작업이 수행

12. crontab: 주기적으로 반복되는 일 자동 설정.

    Ex) * * * * * /scripts/script.sh => 항상 script.sh수행

    ​	(*은 true값이고 앞부터 분, 시, 일, 월, 요일이다.)

    | 옵션 | 설명                       |
    | ---- | -------------------------- |
    | -l   | crontab에 설정된 내용 출력 |
    | -e   | crontab에 작성 (수정)      |
    | -r   | crontab 내용 삭제          |
    | -u   | 특정 사용자의 일정 수정    |



> Editor 종류 및 활용

- pico

  - Pine이라는 Email 클라이언트 프로그램과 함께 배포된 워싱턴 대학에서 만든 유닉스용 편집기

  - 자유 소프트웨어 라이센스 x

  - 윈도우의 메모장처럼 사용가능

    | 옵션     | 설명                               |
    | -------- | ---------------------------------- |
    | Ctrl + O | 파일 저장                          |
    | Ctrl + x | PICO 종료                          |
    | Ctrl + r | 현재 커서위치에 다른 파일을 불러옴 |
    | Ctrl + a | 현재 행의 맨 앞으로 커서 이동      |
    | Ctrl + e | 현재 행의 맨 끝으로 커서 이동      |
    | Ctrl + i | 현재의 위치에 Tab을 사용           |
    | Ctrl + n | 다음 행으로 이동                   |
    | Ctrl + b | 한 문자 뒤로 이동                  |

- vi

  - 1976년 빌 조이가 초기 BSD 릴리즈에 포함될 편집기로 만듬

  - 모드형 편집기 ( 명령/실행/편집 모드로 구성)

  - 편집기를 실행하자 마자 나오는 화면이 명령모드

  - 옵션

    - vi + 파일명: 파일열기
    - vi -r : 파일이 손상되었을 경우 파일 복구
    - vi + [숫자] + 파일명: 해당줄로 커서 이동, 숫자가 없는 경우 마지막줄로 커서이동
    - vi $ 파일명: 커서가 줄의 맨 끝으로 이동
    - vi - 파일명: 앞줄의 첫 문자로 이동

  - 명령모드

    - 삭제
      - x : 커서가 위치한 곳의 한 문자 삭제
      - dd : 한 라인 삭제
      - dw : 커서 위치에서 오른쪽 한 단어 삭제
      - db : 커서 위치에서 왼쪽 한 단어 삭제
    - 복사
      - yy : 한 라인 복사
      - yw : 커서 위치에서 오른쪽 한 단어 복사
      - yb : 커서 위치에서 왼쪽 한 단어 복사

    - 붙혀넣기
      - p : 커서 위치 오른쪽에 붙혀넣기
      - P : 커서 위치 왼쪽에 붙혀넣기
    - 기타
      - /검색어 : 전진 검색
      - ?검색어 : 후진 검색
      - n : 검색반복
      - u : 되돌리기
      - J: 커서 위치 아랫줄을 현재 줄에 붙힘
      - ZZ : 현재 문서 저장하고 종료

  - 편집 모드

    - i : 현재 커서 위치부터 편집
    - a : 현재 커서의 위치 다음 칸부터 편집
    - o : 현재 커서의 다음 줄에 입력
    - s : 현재 커서 위치의 한 글자를 지우고 입력

  - EX 명령 모드 (실행모드)

    - `:`키로 진입

    - 시작줄번호, 끝줄번호d : 시작줄부터 끝줄까지의 줄을 삭제

      ​			"					y :  					"					복사

    - n : 다음 파일 편집 (vi 실행시 인자로 입력한 파일이 여러 개일 경우)

    - set nu : 줄번호 활성화 (<-> set nonu)

    - w : 저장하기

    - w [파일이름] : 파일이름으로 저장

    - q : 종료

    - wq : 저장하고 종료

    - w, q, wq 뒤에 !를 붙히면 강제로 실행

    - 치환

      - 's/문자열/새문자열' 형식

        Ex) %s/aaa/bbb => aaa란 문자열 모두를 bbb로 치환

        ​		1,. /s/aaa/bbb => 1행부터 현재행까지 aaa란 문자열을 bbb로 치환

- vim

  - vi편집기와 호환이 되며 편집시 다양한 색상을 이용한 높은 가시성 제공
  - 명령모드와 입력모두 제공

- nano

  - CLI 환경에서 더욱 간단하게 텍스트 파일이나 프로그램 파일을 작성하고 편집가능한 에디터 (기본적으로 설치되어있음)
  - 공중 사용 허가서 o

- emacs

  - 리차드 스톨만이 만든 매크로 기능이 포함된 고성능 문서 편집기
  - 비모드형 편집기로 Ctrl 또는 Alt와 다른 키 조합으로 이용됨
  - 파일의 종류에 따라 적합한 모드를 스스로 만듬 (유연성, 확장성)
  - 편집기 형식
    - <Ctrl + x>, <Ctrl + c> : 편집 종료, emacs 종료
    - <Ctrl + s> : 편집된 내용 저장
    - <Ctrl + a> : 줄 처음으로 이동
    - <Ctrl + e> : 줄 끝으로 이동
    - <Ctrl + v> : 한 화면 앞으로 이동
    - <Alt + v> : 한 화면 뒤로 이동
    - <Ctrl + d> : 커서 위치의 글자 삭제
    - <Alt + k> : 커서 뒤 문장 전체 삭제
    - <Ctrl + j> : 행 끝을 나란히 맞춤



##### Linux Package

> 배포판 종류와 패키지 툴

RedHat 

: CentOS, RHEL, Fedora = rpm, yum

Debian

: Debian, Ubuntu = apkg, apt-get, aptitude



1. RPM

   - 파일 자동 설치 기능

   - `-U` 옵션을 통해 업그레이드 가능

   - 시스템 검증 가능

   - 패키지구조 : 패키지명 / 버전 / 릴리즈번호(패치횟수) / (페도라버전) / 아키텍쳐(cpu 권장 사항)

     Ex) talent-2.9.9-7hs-i386.rpm

   - 옵션 => rpm [ 옵션 ] [ 패키지명 ]

   | 옵션           | 설명                                                         |
   | -------------- | ------------------------------------------------------------ |
   | -i             | 새로운 패키지를 설치                                         |
   | -h             | 패키지를 출 때 # 마크 표시                                   |
   | -q             | 패키지 설치여부 확인 후 있다면 패키지 이름과 버전 출력       |
   | -e             | 패키지 제거                                                  |
   | -g             | 패키지 설치 여부 확인                                        |
   | -f<파일>       | <파일>을 포함하는 패키지 질문 수행                           |
   | -v             | 진행 과정을 메세지로 표시                                    |
   | -vv            | 메세지를 상세히 표시                                         |
   | --nodeps       | 의존성 관계를 무시하고 설치                                  |
   | --force        | 강제 설치(--oldpackage, --replacepkgs, --replacefiles를 모두 사용한 것과 동일) |
   | --oldpackage   | 구버전 다운그레이드                                          |
   | --replacepkgs  | 패키지 재설치                                                |
   | --replacefiles | 파일 덮어쓰며 강제 재설치                                    |
   | --test         | 패키지를 실제로 설치하지 않고 충돌 사항이 있는지 점검        |

   > rmp 검증

   Rpm -[V+옵션(f,a,p)] [ 패키지 명 ]

   - 검증 코드

   | 코드 | 설명               | 코드 | 설명             |
   | ---- | ------------------ | ---- | ---------------- |
   | S    | 파일의 크기 변경   | U    | 파일 사용자 변경 |
   | L    | 심볼릭 링크 변경   | G    | 파일 그룹 변경   |
   | T    | 파일의 수정일 변경 | M    | 파일 모드가 변경 |
   | 5    | MD5 체크섬 변경    | D    | 장치 파일을 변경 |



2. dpkg

   - 데비안 패키지 관리 시스템의 기초 소프트웨어

   - 패키지 구성 : 패키지이름_버전-릴리즈-아키텍쳐.dub

   - 옵션 => dpkg [-option] [flag] [패키지 명]

     | 옵션 | 설명                                   |
     | ---- | -------------------------------------- |
     | i    | 패키지 설치                            |
     | r    | 설치된 패키지만 삭제                   |
     | p    | 패키지와 설정 모두 삭제                |
     | s    | 패키지의 상황 정보                     |
     | L    | dpkg가 설치한 모든 목록 확인           |
     | C    | deb파일이 포함된 패키지 파일을 볼때    |
     | I    | 설치되거나 혹은 설치 중인 패키지 확인  |
     | S    | 특정 파일이 속한 패키지를 찾고자 할 때 |

     | 플래그      | 설명                          |
     | ----------- | ----------------------------- |
     | --purge     | 데비안 패키지를 완전히 제거   |
     | --configure | 데비안 패키지를 정확하게 설치 |



3. apt (Advanced Package Tool)

   - 패키지의 설치 제거 등을 관리하는 프로그램
   - 최근에 GUI 기반의 시냅틱이나 앱티튜드 등을 사용
   - /etc/apt/sources.list 파일 참조
   - 패키지유형 / 저장소 주소(URL) / 우분투 정보 / 카테고리로 구성

   - 명령어

     - apt-get install [패키지명] : 패키지 설치
     - apt-get (-purge) remove [패키지명] : 패키지 제거
     - apt-get -reinstall install [패키지명] : 패키지 이상 시 재설치
     - apt-get update : 소스리스트 업데이트
     - apt-get upgrade : 패키지서버에서 리스트 업데이트
     - apt-cache search [패키지명] : 패키지 검색
     - apt-cache show [패키지명] : 패키지 정보보기

     | 옵션 | 설명                               |
     | ---- | ---------------------------------- |
     | -y   | 모든 질문을 표시하지 않고 yes 처리 |
     | -u   | 업그레이드 한 패키지 목록 표시     |
     | -V   | 자세한 버전 표시                   |



4. YUM (Yellowdog Updater, Modified)

   - 자동으로 설치, 업데이트, 삭제 가능
   - 인터넷을 통해 자동적으로 설치
   - 울 패키지 관리도구가 yum 문제점 보완
   - /usr/bin/yum 참조

   - 옵션 => yum [-option] [-명령] [패키지 명]

     | 옵션 | 설명                               |
     | ---- | ---------------------------------- |
     | h    | 도움말 출력                        |
     | y    | 설치 과정의 모든 질문을 yes로 대답 |
     | v    | 자세한 메세지 출력                 |

     | 명령         | 설명                                                      |
     | ------------ | --------------------------------------------------------- |
     | install      | 패키지 설치                                               |
     | update       | 패키지명이 없으면 전체 업데이트, 있으면 해당 패키지만.    |
     | check-update | 현재 시스템에 설치된 패키지를 기준으로 업데이트 목록 출력 |
     | remove       | 설치된 패키지 삭제                                        |
     | list         | 패키지 목록 확인                                          |
     | Info         | 패키지 정보 확인                                          |
     | History      | 작업한 내역을 확인                                        |

     